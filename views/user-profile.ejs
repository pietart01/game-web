<!-- user-profile.ejs -->
<div class="login-form-container" style="background: var(--form-background); max-height: 100%; overflow-y: auto;">
    <div class="flex items-center mb-4">
        <img src="<%= avatar_url %>" alt="User Avatar" class="w-12 h-12 rounded-full mr-3 border-2 border-primary">
        <div>
            <h2 class="text-lg font-bold" style="color: var(--primary-color);"><%= username %></h2>
<!--            <p class="text-xs" style="color: var(&#45;&#45;placeholder-color);">Welcome back!</p>-->
        </div>
    </div>

    <div class="grid grid-cols-2 gap-2 mb-4">
        <div class="flex flex-col p-2 rounded-md" style="background: var(--secondary-gradient);">
            <span class="text-xs font-medium" style="color: var(--primary-color);">캐시</span>
            <span class="text-sm font-semibold" style="color: var(--text-color);"><%= cash.toLocaleString() %></span>
        </div>
        <div class="flex flex-col p-2 rounded-md" style="background: var(--secondary-gradient);">
            <span class="text-xs font-medium" style="color: var(--primary-color);">실버</span>
            <span class="text-sm font-semibold" style="color: var(--text-color);"><%= silver.toLocaleString() %></span>
        </div>
        <div class="flex flex-col p-2 rounded-md col-span-2" style="background: var(--secondary-gradient);">
            <span class="text-xs font-medium" style="color: var(--primary-color);">골드</span>
            <span class="text-sm font-semibold" style="color: var(--text-color);"><%= gold.toLocaleString() %></span>
        </div>
    </div>

    <div class="grid grid-cols-2 gap-2">
        <% ['내정보', '금고'].forEach(action => { %>
            <button class="btn btn-secondary text-xs py-2" style="background-image: var(--secondary-gradient); color: var(--primary-color);">
                <%= action %>
            </button>
        <% }); %>
        <button id="logoutButton" class="btn btn-primary col-span-2 text-sm py-2" style="background-image: var(--primary-gradient); color: white;">
            로그아웃
        </button>
    </div>
</div>

<script>
  document.getElementById('logoutButton').addEventListener('click', function() {
    fetch('/logout', {
      method: 'GET',
      credentials: 'same-origin'
    }).then(response => {
      if (response.ok) {
        window.location.href = '/'; // Redirect to login page after successful logout
      } else {
        console.error('Logout failed');
      }
    }).catch(error => {
      console.error('Error:', error);
    });
  });
</script>
